<div id="content">

    <mat-vertical-stepper #stepper>

      <!-- MARCA -->
      <mat-step>
        <ng-template matStepLabel>Marca {{ brandName }}</ng-template>
        <!---------------- DDL MARCA ------------------->
        <mat-form-field id="marca">
          <mat-label>Marca</mat-label>
          <mat-select placeholder="Marca" #marcaValue (selectionChange)="mudarMarca($event.value)">
              <mat-option *ngFor="let marca of marcas" (click)="brandName = marca.brand_name"
              [value]="marca.brand_Id">{{ marca.brand_name }}</mat-option>
          </mat-select>
        </mat-form-field>
        <button mat-raised-button color="accent" matStepperNext>Próximo<mat-icon>arrow_downward</mat-icon></button>
      </mat-step>

      <!-- COLEÇÃO -->
      <mat-step>
        <ng-template matStepLabel>Coleção {{ collectionName }}</ng-template>
        <!---------------- DDL COLEÇÃO ------------------->
        <mat-form-field id="colecao">
          <mat-label>Coleção</mat-label>
          <mat-select placeholder="Marca" #colecaoValue (selectionChange)="mudarColecao($event.value)">
              <mat-option *ngFor="let colecao of colecoes" 
              (click)="collectionName = colecao.collection_name"
              [value]="colecao.collection_Id">{{ colecao.collection_name }}</mat-option>
          </mat-select>
        </mat-form-field>
        <button mat-raised-button color="accent" matStepperPrevious>Voltar<mat-icon>arrow_upward</mat-icon></button>
        &nbsp;
        <button mat-raised-button color="accent" matStepperNext>Próximo<mat-icon>arrow_downward</mat-icon></button>
      </mat-step>
      
      <!-- ORDENAR -->
      <mat-step>
        <ng-template matStepLabel>Ordenar {{ orderByName }}</ng-template>
        <!------------------------ DDL ORDENAR ------------------------------>
        <mat-form-field id="ordem">
          <mat-label>Ordenar</mat-label>
          <mat-select placeholder="Ordenar" #orderBy (selectionChange)="mudarOrdem($event.value)">
              <mat-option value="1">COLEÇÃO EM ORDEM CRESCENTE</mat-option>
              <mat-option value="2">COLEÇÃO EM ORDEM DECRESCENTE</mat-option>
              <mat-option value="3">DATA DE ENTRADA EM ORDEM CRESCENTE</mat-option>
              <mat-option value="4">DATA DE ENTRADA EM ORDEM DECRESCENTE</mat-option>
              <mat-option value="5">NÚMERO DO PEDIDO EM ORDEM CRESCENTE</mat-option>
              <mat-option value="6">NÚMERO DO PEDIDO EM ORDEM DECRESCENTE</mat-option>
              <mat-option value="7">A - Z</mat-option>
              <mat-option value="8">Z - A</mat-option>
          </mat-select>
        </mat-form-field>
        <button mat-raised-button color="accent" matStepperPrevious>Voltar<mat-icon>arrow_upward</mat-icon></button>
        &nbsp;
        <button mat-raised-button color="accent" matStepperNext>Próximo<mat-icon>arrow_downward</mat-icon></button>
      </mat-step>

      <!-- RAZÃO SOCIAL -->
      <mat-step>
        <ng-template matStepLabel>Razão Social {{ razaoSocial }}</ng-template>
        <!------------------------ CAMPO RAZÃO SOCIAL ------------------------->
        <mat-form-field id="razao-social" (keyup)="companyName = $event.target.value" (keyup)="buscarClientes()">
          <mat-label>Razão Social</mat-label>
          <input type="text" matInput [matAutocomplete]="autoCompleteRazao">
          <mat-autocomplete 
          #autoCompleteRazao="matAutocomplete"
          (optionSelected)="mudarCustomerFabId($event.option.value.customerFab_Id)"
          (optionSelected)="mudarCompanyDoc($event.option.value.company_doc)" 
          [displayWith]="displayFn.bind(this)">
              <mat-option *ngFor="let cliente of clientes" [value]="cliente" (click)="razaoSocial = cliente.customer_name">
                  {{ cliente.customer_name }}
              </mat-option>
          </mat-autocomplete>
        </mat-form-field>
        <button mat-raised-button color="accent" matStepperPrevious>Voltar<mat-icon>arrow_upward</mat-icon></button>
        &nbsp;
        <button mat-raised-button color="accent" matStepperNext>Próximo<mat-icon>arrow_downward</mat-icon></button>
      </mat-step>

      <!-- CNPJ -->
      <mat-step label="CNPJ">
        <ng-template matStepLabel>CNPJ {{ companyDoc }}</ng-template>
        <!---------------------- CAMPO CNPJ ------------------------->
        <mat-form-field id="cnpj" (keyup)="companyDoc = $event.target.value">
          <mat-label>CNPJ</mat-label>
          <input type="text" matInput [value]="companyDoc">
        </mat-form-field>
        <button mat-raised-button color="accent" matStepperPrevious>Voltar<mat-icon>arrow_upward</mat-icon></button>
        &nbsp;
        <button mat-raised-button color="accent" matStepperNext>Próximo<mat-icon>arrow_downward</mat-icon></button>
      </mat-step>

      <!-- CÓDIGO -->
      <mat-step label="Código">
        <ng-template matStepLabel>Código {{ customerFabId }}</ng-template>
        <!---------------------- CAMPO CÓDIGO ------------------------->
        <mat-form-field id="codigo" (keyup)="customerFabId = $event.target.value">
          <mat-label>Código</mat-label>
          <input type="text" matInput [value]="customerFabId">
        </mat-form-field>
        <button mat-raised-button color="accent" matStepperPrevious>Voltar<mat-icon>arrow_upward</mat-icon></button>
        &nbsp;
        <button mat-raised-button color="accent" (click)="stepper.reset()">Retornar <mat-icon>block</mat-icon></button>
      </mat-step>
    </mat-vertical-stepper>

    <!--------------------- REPRESENTANTE --------------------->
    <!-- <mat-form-field id="repres">
        <mat-label>Representante</mat-label>
        <mat-select placeholder="Representante" #represValue (selectionChange)="mudarRepres($event.value)">
            <mat-option *ngFor="let repre of repres" 
            [value]="repre.agent_Id">{{ agentId }}</mat-option>
        </mat-select>
    </mat-form-field> -->

    <!---------------------- BOTAO PESQUISAR --------------------->
    <button mat-raised-button
    color="accent"
    id="botao-buscar" 
    type="submit" 
    (click)="company_doc = cnpjDigitado"
    (click)="buscarInvoices()">
    <strong>BUSCAR</strong>
    <mat-icon>search</mat-icon>
    </button> 
    
    <!--------------------- CARDS FATURAMENTOS ---------------------->
    <mat-card id="cardTotal" *ngIf="consultado" class="mat-elevation-z8">
        <mat-card-title>
            <mat-icon>poll</mat-icon> Total
        </mat-card-title>
        <mat-card-content>
            <strong>Qtde Fat:</strong><br> {{ total.sum_total_quantity_invoiced | number: '1.0-0' | replace:',':'.' }}
            <br>
            <strong>Vr Fat:</strong><br> {{ total.sum_total_price_invoiced | currency: 'BRL' : 'symbol' : '1.0-0' | replace:',':'.' | replace:',':'.' }}
        </mat-card-content>
    </mat-card>
   
    <div id="botao-mostrar-todos" *ngIf="consultado">
        <mat-slide-toggle 
        [(ngModel)]="mostrarTodosOsFaturamentos" 
        color="accent"> 
        <span style="font-weight: bold; font-size: 1.2rem;"> 
            Mostrar todos os faturamentos 
        </span> 
        </mat-slide-toggle>
    </div>
    
    <div *ngIf="mostrarTodosOsFaturamentos">
        <mat-card id="cardsFaturamentos" *ngFor="let invoice of invoices" class="mat-elevation-z8">
            <mat-card-title id="cardsFaturamentosGrande"><mat-icon>account_box</mat-icon> {{ invoice.customer_name }} </mat-card-title>
            <mat-card-content>
                <div id="cardsFaturamentosMedio"><strong>NF: </strong>{{ invoice.invoice }}  - {{ invoice.dt_invoice }}</div>
                <div id="cardsFaturamentosMedio"><strong>Ped Linx:</strong> {{ invoice.orderFactory_Id }}<strong>Ped Wise:</strong> {{ invoice.order_Id }}</div>
                <div id="cardsFaturamentosPequeno"><strong>Ped:<br></strong>{{ invoice.total_quantity | number:'1.0-0' | replace:',':'.' }}</div>
                <div id="cardsFaturamentosPequeno"><strong>Emb:<br></strong>{{ invoice.packed_quantity | number:'1.0-0' | replace:',':'.' }}</div>
                <div id="cardsFaturamentosPequeno"><strong>Fat:<br></strong>{{ invoice.total_quantity_invoiced | number:'1.0-0' | replace:',':'.' }}</div>
                <div id="cardsFaturamentosPequeno"><strong>%<br></strong>{{ invoice.total_quantity_invoiced / invoice.total_quantity * 100 | number: '1.0-0' | replace:',':'.' }}</div>
                <div id="cardsFaturamentosPequeno"><strong>Ped:<br></strong>{{ invoice.total_price | currency: 'BRL' : 'symbol' : '1.0-0' | replace:',':'.' }}</div>
                <div id="cardsFaturamentosPequeno"><strong>Emb:<br></strong>{{ invoice.packed_price | currency: 'BRL' : 'symbol' : '1.0-0' | replace:',':'.' }}</div>
                <div id="cardsFaturamentosPequeno"><strong>Fat:<br></strong>{{ invoice.total_price_invoiced | currency: 'BRL' : 'symbol' : '1.0-0' | replace:',':'.' }}</div>
                <div id="cardsFaturamentosPequeno"><strong>%<br></strong>{{ invoice.total_price_invoiced / invoice.total_price * 100 | number: '1.0-0' | replace:',':'.' }}</div>
            </mat-card-content>
        </mat-card>
    </div>
</div>
